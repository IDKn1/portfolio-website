---
import BaseLayout from "../layouts/base.astro";
import About from "../components/about.astro";
import Projects from "../components/projects.astro";
import Hero from "../components/hero.astro";
import Navbar from "../components/navbar.astro";
---

<BaseLayout title="Nikolai's Portfolio Website">
  <div class="transition-cover" slot="full-bleed"></div>

  <Navbar />

  <div class="hero" slot="full-bleed">
    <Hero />
  </div>

  <div class="content">
    <div class="projects-wrapper">
      <Projects cato="work" />
    </div>

    <div class="about">
      <About />
    </div>

    <div class="misc-wrapper">
      <Projects cato="misc" />
    </div>
  </div>

  <script src="../landingAnimations.js"></script>
  <script src="../heroAsciiAnimation.js"></script>
</BaseLayout>

<script>
  import { setupCardClickHandlers } from "../../src/cardTransition.js";
  import { gsap } from "gsap";

  window.addEventListener("pageshow", () => {
    const transitionCover = document.querySelector(".transition-cover");
    if (transitionCover) {
      gsap.set(transitionCover, {
        opacity: 0,
        width: 0,
        height: 0,
        scale: 1,
      });
    }
  });

  document.addEventListener("DOMContentLoaded", () => {
    setupCardClickHandlers();
  });
</script>

<style>
  .transition-cover {
    opacity: 0;
  }

  .content {
    background-color: var(--bg-clr);
    padding-block: 2rem;
  }

  .content > * {
    width: 100%;
    top: 4rem;
  }
</style>
